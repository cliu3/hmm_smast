<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of ge_contour_old</title>
  <meta name="keywords" content="ge_contour_old">
  <meta name="description" content="Reference page in help browser:">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">dependencies</a> &gt; <a href="#">googleearthtoolbox</a> &gt; <a href="index.html">matlab</a> &gt; ge_contour_old.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for dependencies/googleearthtoolbox/matlab&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>ge_contour_old
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>Reference page in help browser:</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function [output] = ge_contour(x,y,data,varargin ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Reference page in help browser: 
 
 &lt;a href=&quot;matlab:web(fullfile(ge_root,'html','ge_contour.html'),'-helpbrowser')&quot;&gt;link&lt;/a&gt; to html documentation
 &lt;a href=&quot;matlab:web(fullfile(ge_root,'html','license.html'),'-helpbrowser')&quot;&gt;show license statement&lt;/a&gt;</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="authoptions.html" class="code" title="function [AuthorizedOptions] = authoptions( filename )">authoptions</a>	% all available options to each function</li><li><a href="ge_plot.html" class="code" title="function output = ge_plot(X,Y,varargin)">ge_plot</a>	Reference page in help browser:</li><li><a href="parsepairs.html" class="code" title="">parsepairs</a>	% Please use the link below to view the documentation.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function S = conv2colorstr(B,G,R)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [output] = ge_contour(x,y,data,varargin )</a>
0002 <span class="comment">% Reference page in help browser:</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% &lt;a href=&quot;matlab:web(fullfile(ge_root,'html','ge_contour.html'),'-helpbrowser')&quot;&gt;link&lt;/a&gt; to html documentation</span>
0005 <span class="comment">% &lt;a href=&quot;matlab:web(fullfile(ge_root,'html','license.html'),'-helpbrowser')&quot;&gt;show license statement&lt;/a&gt;</span>
0006 <span class="comment">%</span>
0007 
0008 
0009 AuthorizedOptions = <a href="authoptions.html" class="code" title="function [AuthorizedOptions] = authoptions( filename )">authoptions</a>(mfilename);
0010 
0011            id = <span class="string">'contour'</span>;
0012         idTag = <span class="string">'id'</span>;
0013          name = <span class="string">'ge_contour'</span>;
0014     timeStamp = <span class="string">' '</span>;
0015 timeSpanStart = <span class="string">' '</span>;
0016  timeSpanStop = <span class="string">' '</span>;
0017   description = <span class="string">''</span>;
0018    visibility = 1;
0019     <span class="comment">%lineColor = 'FFFFFFFF';</span>
0020     lineWidth = 0.0;
0021       snippet = <span class="string">' '</span>;
0022      altitude = 1.0;
0023       extrude = 0;
0024    tessellate = 1;
0025  altitudeMode = <span class="string">'relativeToGround'</span>;
0026   msgToScreen = false; 
0027   forceAsLine = true;
0028      numLevels = 15;
0029    lineValues = [];
0030     lineAlpha = <span class="string">'FF'</span>;
0031        cMap   = <span class="string">'jet'</span>;
0032        region = <span class="string">' '</span>;
0033     
0034 <a href="parsepairs.html" class="code" title="">parsepairs</a> <span class="comment">%script that parses Parameter/value pairs.</span>
0035 
0036 <span class="keyword">if</span> msgToScreen
0037    disp([<span class="string">'Running '</span> mfilename <span class="string">'...'</span>]) 
0038 <span class="keyword">end</span>
0039 
0040 
0041 <span class="keyword">if</span>( isempty( x ) || isempty( y ) || isempty(data) )
0042     error(<span class="string">'empty coordinates passed to ge_contour(...).'</span>);
0043 <span class="keyword">end</span>
0044 
0045 
0046 <span class="keyword">if</span> ~(isequal(altitudeMode,<span class="string">'clampToGround'</span>)||<span class="keyword">...</span>
0047    isequal(altitudeMode,<span class="string">'relativeToGround'</span>)||<span class="keyword">...</span>
0048    isequal(altitudeMode,<span class="string">'absolute'</span>))
0049 
0050     error([<span class="string">'Variable '</span>,39,<span class="string">'altitudeMode'</span>,39, <span class="string">' should be one of '</span> ,39,<span class="string">'clampToGround'</span>,39,<span class="string">', '</span>,10,39,<span class="string">'relativeToGround'</span>,39,<span class="string">', or '</span>,39,<span class="string">'absolute'</span>,39,<span class="string">'.'</span> ])
0051     
0052 <span class="keyword">end</span>
0053 
0054 x1 = x(1,:);
0055 <span class="keyword">if</span> length(x1) == 1
0056     x1 = x(:,1);
0057 <span class="keyword">end</span>
0058 y1 = y(:,1);
0059 <span class="keyword">if</span> length(y1) == 1
0060     y1 = y(1,:);
0061 <span class="keyword">end</span>
0062 
0063 <span class="keyword">if</span> isempty(lineValues)
0064 
0065     <span class="keyword">if</span> numLevels &lt;= 1
0066         C = contourc(x1,y1,data);
0067     <span class="keyword">else</span>
0068         C = contourc(x1,y1,data,numLevels);
0069     <span class="keyword">end</span>
0070 <span class="keyword">else</span>
0071     
0072     numLevels = length(lineValues);
0073     C = contourc(x1,y1,data,lineValues);
0074     
0075 <span class="keyword">end</span>
0076 
0077 
0078 
0079 <span class="keyword">if</span> altitude &lt;= 0
0080     altitude = 1.0;
0081     disp(<span class="string">'Resetting altitude to 1.0.'</span>)
0082 <span class="keyword">end</span>
0083 
0084 
0085 i = 1;
0086 
0087 X = C(1,:);
0088 Y = C(2,:);
0089 
0090 C1=[];
0091 
0092 <span class="keyword">if</span> ischar(cMap)
0093 
0094     RIx = round(rand*10000);
0095     figure(RIx)    
0096     eval([<span class="string">'C1 = colormap('</span> cMap <span class="string">'(256));'</span>]);
0097     close(RIx)
0098     clear RIx
0099 
0100 <span class="keyword">else</span>
0101     C1 = cMap;
0102 <span class="keyword">end</span>
0103 
0104 X1 = linspace(0,1,size(C1,1))';
0105 YRed = C1(:,1);
0106 YGreen = C1(:,2);
0107 YBlue = C1(:,3);
0108 
0109 
0110 <span class="keyword">if</span> ~exist(<span class="string">'cLimHigh'</span>,<span class="string">'var'</span>)
0111     cLimHigh = max(data(:));
0112 <span class="keyword">end</span>
0113 <span class="keyword">if</span> ~exist(<span class="string">'cLimLow'</span>,<span class="string">'var'</span>)
0114     cLimLow = min(data(:));
0115 <span class="keyword">end</span>
0116 
0117 idxs = [];
0118 idxCtr = 1;
0119 
0120 <span class="keyword">while</span>( i &lt; length(C) )
0121    X(i)=NaN;
0122    Y(i)=NaN;
0123    idxs(idxCtr) = i;
0124    idxCtr = idxCtr + 1;
0125    count =  floor(C(2,i));
0126    i = i+count+1; 
0127 <span class="keyword">end</span>
0128 
0129 output = <span class="string">''</span>;
0130 <span class="keyword">for</span> i = 1:length(C)
0131     <span class="keyword">if</span> isnan(X(i))
0132 
0133         idxp = find(idxs == i);
0134         idxp = idxp + 1;
0135         <span class="keyword">try</span>
0136             idxp = idxs(idxp);
0137         <span class="keyword">catch</span>
0138             idxp = length(C);
0139         <span class="keyword">end</span>
0140         
0141         <span class="keyword">if</span> exist(<span class="string">'lineColor'</span>,<span class="string">'var'</span>)
0142             hexColorStr = lineColor;
0143         <span class="keyword">else</span>
0144 
0145             f = (C(1,i)-cLimLow)/(cLimHigh-cLimLow);
0146 
0147             <span class="keyword">if</span> f&lt;0
0148                 f=0;
0149             <span class="keyword">end</span>
0150             <span class="keyword">if</span> f&gt;1
0151                 f=1;
0152             <span class="keyword">end</span>
0153 
0154             YIRed = interp1(X1,YRed,f);
0155             YIGreen = interp1(X1,YGreen,f);
0156             YIBlue = interp1(X1,YBlue,f);
0157 
0158             hexColorStr = [lineAlpha,<a href="#_sub1" class="code" title="subfunction S = conv2colorstr(B,G,R)">conv2colorstr</a>(YIRed,YIGreen,YIBlue)];
0159         <span class="keyword">end</span>
0160 
0161         output = [output <a href="ge_plot.html" class="code" title="function output = ge_plot(X,Y,varargin)">ge_plot</a>(X(i:idxp),Y(i:idxp),<span class="keyword">...</span>
0162                 <span class="string">'name'</span>,name, <span class="keyword">...</span>
0163                 <span class="string">'snippet'</span>, snippet,<span class="keyword">...</span>
0164                 <span class="string">'description'</span>,description, <span class="keyword">...</span>
0165                 <span class="string">'region'</span>, region, <span class="keyword">...</span>
0166                 <span class="string">'timeStamp'</span>,timeStamp, <span class="keyword">...</span>
0167                 <span class="string">'timeSpanStart'</span>,timeSpanStart, <span class="keyword">...</span>
0168                 <span class="string">'timeSpanStop'</span>,timeSpanStop, <span class="keyword">...</span>
0169                 <span class="string">'visibility'</span>,visibility, <span class="keyword">...</span>
0170                 <span class="string">'lineColor'</span>,hexColorStr,<span class="keyword">...</span>
0171                 <span class="string">'lineWidth'</span>,lineWidth,<span class="keyword">...</span>
0172                 <span class="string">'altitude'</span>,altitude,<span class="keyword">...</span>
0173                 <span class="string">'altitudeMode'</span>,altitudeMode,<span class="keyword">...</span>
0174                 <span class="string">'extrude'</span>,extrude,<span class="keyword">...</span>
0175                 <span class="string">'tessellate'</span>,tessellate) ];
0176 
0177         count = floor(C(2,i));
0178         i = i+count+1;
0179 
0180 
0181 
0182 
0183     <span class="keyword">end</span>
0184 <span class="keyword">end</span>
0185 
0186 
0187 <span class="keyword">if</span> msgToScreen
0188    disp([<span class="string">'Running '</span> mfilename <span class="string">'...Done'</span>]) 
0189 <span class="keyword">end</span>
0190 
0191 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0192 <span class="comment">%% local function</span>
0193 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0194 
0195 <a name="_sub1" href="#_subfunctions" class="code">function S = conv2colorstr(B,G,R)</a>
0196 <span class="comment">% Please note that this conv2colorstr is different from that in</span>
0197 <span class="comment">% ge_colorbar. This one writes KML formatted hexadecimal</span>
0198 <span class="comment">% colorstrings, ge_colorbar() writes HTML formatted colorstr.</span>
0199 
0200 
0201 S=<span class="string">'000000'</span>;
0202 
0203 hexB = dec2hex(round(B*255));
0204 hexG = dec2hex(round(G*255));
0205 hexR = dec2hex(round(R*255));
0206 
0207 LB = length(hexB);
0208 LG = length(hexG);
0209 LR = length(hexR);
0210 
0211 S(3-LB:2)=hexB;
0212 S(5-LG:4)=hexG;
0213 S(7-LR:6)=hexR;</pre></div>
<hr><address>Generated on Tue 27-Sep-2016 19:23:04 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>