<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of ge_point</title>
  <meta name="keywords" content="ge_point">
  <meta name="description" content="Reference page in help browser:">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="#">hmm_smast</a> &gt; <a href="#">dependencies</a> &gt; <a href="#">googleearthtoolbox</a> &gt; <a href="index.html">matlab</a> &gt; ge_point.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for hmm_smast/dependencies/googleearthtoolbox/matlab&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>ge_point
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>Reference page in help browser:</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function [output] = ge_point(X,Y,Z,varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> Reference page in help browser: 
 
 &lt;a href=&quot;matlab:web(fullfile(ge_root,'html','ge_point.html'),'-helpbrowser')&quot;&gt;link&lt;/a&gt; to html documentation
 &lt;a href=&quot;matlab:web(fullfile(ge_root,'html','license.html'),'-helpbrowser')&quot;&gt;show license statement&lt;/a&gt;</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="authoptions.html" class="code" title="function [AuthorizedOptions] = authoptions( filename )">authoptions</a>	% all available options to each function</li><li><a href="parsepairs.html" class="code" title="">parsepairs</a>	% Please use the link below to view the documentation.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="../../../../hmm_smast/dependencies/googleearthtoolbox/matlab/demo/demo_ge_output.html" class="code" title="function demo_ge_output()">demo_ge_output</a>	% Demo ge_output</li><li><a href="../../../../hmm_smast/dependencies/googleearthtoolbox/matlab/demo/demo_ge_point.html" class="code" title="function demo_ge_point()%% Demo ge_point">demo_ge_point</a>	Example usage of the ge_point function.</li><li><a href="../../../../hmm_smast/dependencies/googleearthtoolbox/matlab/doc/ex001_test.html" class="code" title="">ex001_test</a>	</li><li><a href="ge_point_new.html" class="code" title="function [output] = ge_point_new(X,Y,Z,varargin)">ge_point_new</a>	Reference page in help browser:</li><li><a href="ge_text.html" class="code" title="function kmlStr = ge_text(X,Y,Z,S,varargin)">ge_text</a>	</li><li><a href="../../../../hmm_smast/postprocessing/write_ge_track.html" class="code" title="function write_ge_track(mpt);">write_ge_track</a>	write the most probably track to a google earth file</li><li><a href="../../../../hmm_smast/postprocessing/write_ge_track_UD.html" class="code" title="function write_ge_track_UD(tagno)">write_ge_track_UD</a>	write the most probably track to a google earth file</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function s = conv_coord(M)</a></li><li><a href="#_sub2" class="code">function s_out = trim_trail_zero(s_in)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [output] = ge_point(X,Y,Z,varargin)</a>
0002 <span class="comment">% Reference page in help browser:</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% &lt;a href=&quot;matlab:web(fullfile(ge_root,'html','ge_point.html'),'-helpbrowser')&quot;&gt;link&lt;/a&gt; to html documentation</span>
0005 <span class="comment">% &lt;a href=&quot;matlab:web(fullfile(ge_root,'html','license.html'),'-helpbrowser')&quot;&gt;show license statement&lt;/a&gt;</span>
0006 <span class="comment">%</span>
0007 
0008 
0009 AuthorizedOptions = <a href="authoptions.html" class="code" title="function [AuthorizedOptions] = authoptions( filename )">authoptions</a>( mfilename );
0010 
0011     altitudeMode = <span class="string">'clampToGround'</span>;
0012    dataFormatStr = <span class="string">'%g'</span>;
0013 tableBorderWidth = 1;
0014  <span class="comment">%  description: see below;</span>
0015          extrude = 0;
0016        iconColor = <span class="string">'FFFFFFFF'</span>;
0017        iconScale = 1.0;
0018          iconURL = <span class="string">' '</span>;
0019               id = <span class="string">'point'</span>;
0020            idTag = <span class="string">'id'</span>;
0021      msgToScreen = false;
0022      snippet     = <span class="string">' '</span>;
0023 <span class="comment">%        lineColor = 'ffffffff';</span>
0024 <span class="comment">%        lineWidth = 1.0;</span>
0025             name = <span class="string">''</span>;
0026        timeStamp = <span class="string">' '</span>;
0027    timeSpanStart = <span class="string">' '</span>;
0028     timeSpanStop = <span class="string">' '</span>;
0029       visibility = 1;
0030      <span class="comment">%iconLabels = ...</span>
0031    pointDataCell = {};
0032           region = <span class="string">' '</span>;
0033 
0034 
0035 <a href="parsepairs.html" class="code" title="">parsepairs</a> <span class="comment">%script that parses Parameter/Value pairs.</span>
0036 
0037 <span class="keyword">if</span> msgToScreen
0038     disp([<span class="string">'Running: '</span>,mfilename,<span class="string">'...'</span>])
0039 <span class="keyword">end</span>
0040 
0041 htmlTableChars = <span class="string">''</span>;
0042 
0043 
0044 <span class="keyword">if</span> numel(X)==1
0045     timeEntryChars = <span class="string">''</span>;
0046     <span class="keyword">if</span> ~strcmp(timeSpanStart,<span class="string">' '</span>)
0047         timeEntryChars = [timeEntryChars,<span class="string">'&lt;TR&gt;&lt;TD&gt;tStart&lt;/TD&gt;&lt;TD&gt;'</span>,timeSpanStart,<span class="string">'&lt;/TD&gt;&lt;/TR&gt;'</span>];
0048     <span class="keyword">end</span>   
0049     <span class="keyword">if</span> ~strcmp(timeSpanStop,<span class="string">' '</span>)
0050         timeEntryChars = [timeEntryChars,<span class="string">'&lt;TR&gt;&lt;TD&gt;tStop&lt;/TD&gt;&lt;TD&gt;'</span>,timeSpanStop,<span class="string">'&lt;/TD&gt;&lt;/TR&gt;'</span>];
0051     <span class="keyword">end</span>
0052     
0053     <span class="keyword">if</span> exist(<span class="string">'description'</span>,<span class="string">'var'</span>)
0054         <span class="comment">% do nothing, trust user to input the right HTML stuff.</span>
0055     <span class="keyword">elseif</span> isempty(pointDataCell)
0056         
0057         description = [<span class="string">'&lt;TABLE border='</span>,34,int2str(tableBorderWidth),34,<span class="string">'&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;Variable&lt;/B&gt;&lt;/TD&gt;&lt;TD&gt;&lt;B&gt;Value&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;'</span>,<span class="keyword">...</span>
0058                              <span class="string">'&lt;TR&gt;&lt;TD&gt;longitude [decimal degrees]&lt;/TD&gt;&lt;TD&gt;'</span>,num2str(X,dataFormatStr),<span class="string">'&lt;/TD&gt;&lt;/TR&gt;'</span>,<span class="keyword">...</span>
0059                              <span class="string">'&lt;TR&gt;&lt;TD&gt;latitude [decimal degrees]&lt;/TD&gt;&lt;TD&gt;'</span>,num2str(Y,dataFormatStr),<span class="string">'&lt;/TD&gt;&lt;/TR&gt;'</span>,<span class="keyword">...</span><span class="comment">                         </span>
0060                              <span class="string">'&lt;TR&gt;&lt;TD&gt;elevation [m]&lt;/TD&gt;&lt;TD&gt;'</span>,num2str(Z,dataFormatStr),<span class="string">'&lt;/TD&gt;&lt;/TR&gt;'</span>,<span class="keyword">...</span>
0061                              timeEntryChars,htmlTableChars,<span class="keyword">...</span>
0062                              <span class="string">'&lt;/TABLE&gt;'</span>];
0063     <span class="keyword">else</span>
0064         
0065         <span class="keyword">for</span> r=1:size(pointDataCell,1)
0066             htmlTableChars = [htmlTableChars,<span class="string">'&lt;TR&gt;&lt;TD&gt;'</span>,pointDataCell{r,1},<span class="string">'&lt;/TD&gt;&lt;TD&gt;'</span>,pointDataCell{r,2},<span class="string">'&lt;/TD&gt;&lt;/TR&gt;'</span>];
0067         <span class="keyword">end</span>
0068         description = [<span class="string">'&lt;TABLE border='</span>,34,int2str(tableBorderWidth),34,<span class="string">'&gt;&lt;TR&gt;&lt;TD&gt;&lt;B&gt;Variable&lt;/B&gt;&lt;/TD&gt;&lt;TD&gt;&lt;B&gt;Value&lt;/B&gt;&lt;/TD&gt;&lt;/TR&gt;'</span>,<span class="keyword">...</span>
0069                              htmlTableChars,<span class="keyword">...</span>
0070                              <span class="string">'&lt;/TABLE&gt;'</span>];
0071     <span class="keyword">end</span>
0072     
0073 <span class="keyword">else</span>
0074    description = <span class="string">''</span>;
0075 <span class="keyword">end</span>
0076 
0077 
0078 <span class="keyword">if</span>( isempty( X ) || isempty( Y ) || isempty(Z) )
0079     error(<span class="string">'empty coordinates passed to ge_point(...).'</span>);
0080 <span class="keyword">else</span>
0081     <span class="keyword">if</span> ~isequal(size(X(:)),size(Y(:))) 
0082         error([<span class="string">'Coordinate vectors of different length passed'</span> 10 <span class="string">'to function: '</span> 39 mfilename 39 <span class="string">'.'</span>])
0083     <span class="keyword">else</span>
0084         coords(:,1) = X(:);
0085         coords(:,2) = Y(:);
0086         coords(:,3) = Z(:);
0087     <span class="keyword">end</span>
0088 <span class="keyword">end</span>
0089 
0090 <span class="keyword">if</span> region == <span class="string">' '</span>
0091     region_chars = <span class="string">''</span>;
0092 <span class="keyword">else</span>
0093     region_chars = [ region 10 ];
0094 <span class="keyword">end</span>
0095 
0096 <span class="keyword">if</span> ~(isequal(altitudeMode,<span class="string">'clampToGround'</span>)||<span class="keyword">...</span>
0097    isequal(altitudeMode,<span class="string">'relativeToGround'</span>)||<span class="keyword">...</span>
0098    isequal(altitudeMode,<span class="string">'absolute'</span>))
0099 
0100     error([<span class="string">'Variable '</span>,39,<span class="string">'altitudeMode'</span>,39, <span class="string">' should be one of '</span> ,39,<span class="string">'clampToGround'</span>,39,<span class="string">', '</span>,10,39,<span class="string">'relativeToGround'</span>,39,<span class="string">', or '</span>,39,<span class="string">'absolute'</span>,39,<span class="string">'.'</span> ])
0101     
0102 <span class="keyword">end</span>   
0103 
0104 id_chars = [ idTag <span class="string">'=&quot;'</span> id <span class="string">'&quot;'</span> ];
0105 poly_id_chars = [ idTag <span class="string">'=&quot;point_'</span> id <span class="string">'&quot;'</span> ];
0106 name_chars = [ <span class="string">'&lt;name&gt;'</span>,10,name,10,<span class="string">'&lt;/name&gt;'</span>,10 ];
0107 <span class="keyword">if</span> snippet == <span class="string">' '</span>
0108     snippet_chars = <span class="string">''</span>;
0109 <span class="keyword">else</span>
0110     snippet_chars = [ <span class="string">'&lt;Snippet&gt;'</span> snippet <span class="string">'&lt;/Snippet&gt;'</span>,10 ];    
0111 <span class="keyword">end</span>
0112 description_chars = [ <span class="string">'&lt;description&gt;'</span>,10,<span class="string">'&lt;![CDATA['</span> description <span class="string">']]&gt;'</span>,10,<span class="string">'&lt;/description&gt;'</span>,10 ];
0113 visibility_chars = [ <span class="string">'&lt;visibility&gt;'</span>,10,int2str(visibility),10,<span class="string">'&lt;/visibility&gt;'</span>,10];
0114 <span class="comment">% lineColor_chars = [ '&lt;color&gt;',10, lineColor ,10,'&lt;/color&gt;',10 ];</span>
0115 <span class="comment">% lineWidth_chars= [ '&lt;width&gt;',10, num2str(lineWidth, '%.2f') ,10,'&lt;/width&gt;',10 ];</span>
0116 extrude_chars = [ <span class="string">'&lt;extrude&gt;'</span> int2str(extrude) <span class="string">'&lt;/extrude&gt;'</span>,10 ];
0117 
0118 <span class="keyword">if</span> iconURL == <span class="string">' '</span>
0119     icon_chars = <span class="string">''</span>;
0120 <span class="keyword">else</span>
0121     icon_chars = [ <span class="keyword">...</span>
0122     <span class="string">'&lt;IconStyle&gt;'</span>,10,<span class="keyword">...</span>
0123     <span class="string">'&lt;color&gt;'</span> iconColor([1,2,7,8,5,6,3,4]) <span class="string">'&lt;/color&gt;'</span>,10,<span class="keyword">...</span>
0124     <span class="string">'&lt;scale&gt;'</span> num2str(iconScale) <span class="string">'&lt;/scale&gt;'</span>,10,<span class="keyword">...</span>
0125     <span class="string">'&lt;Icon&gt;'</span>,10,<span class="keyword">...</span>
0126     <span class="string">'&lt;href&gt;'</span> iconURL <span class="string">'&lt;/href&gt;'</span>,10,<span class="keyword">...</span>
0127     <span class="string">'&lt;/Icon&gt;'</span>,10, <span class="keyword">...</span>
0128     <span class="string">'&lt;/IconStyle&gt;'</span> ]; 
0129 
0130 <span class="keyword">end</span>
0131 
0132 <span class="keyword">if</span> timeStamp == <span class="string">' '</span>
0133     timeStamp_chars = <span class="string">''</span>;
0134 <span class="keyword">else</span>
0135     timeStamp_chars = [ <span class="string">'&lt;TimeStamp&gt;&lt;when&gt;'</span> timeStamp <span class="string">'&lt;/when&gt;&lt;/TimeStamp&gt;'</span>,10 ];
0136 <span class="keyword">end</span>
0137 
0138 <span class="keyword">if</span> timeSpanStart == <span class="string">' '</span>
0139     timeSpan_chars = <span class="string">''</span>;
0140 <span class="keyword">else</span>
0141     <span class="keyword">if</span> timeSpanStop == <span class="string">' '</span> 
0142         timeSpan_chars = [ <span class="string">'&lt;TimeSpan&gt;&lt;begin&gt;'</span> timeSpanStart <span class="string">'&lt;/begin&gt;&lt;/TimeSpan&gt;'</span>,10 ];
0143     <span class="keyword">else</span>
0144         timeSpan_chars = [ <span class="string">'&lt;TimeSpan&gt;&lt;begin&gt;'</span> timeSpanStart <span class="string">'&lt;/begin&gt;&lt;end&gt;'</span> timeSpanStop <span class="string">'&lt;/end&gt;&lt;/TimeSpan&gt;'</span>,10 ];    
0145     <span class="keyword">end</span>
0146         
0147 <span class="keyword">end</span>
0148 
0149 header=[<span class="string">'&lt;Placemark '</span>,id_chars,<span class="string">'&gt;'</span>,10,<span class="keyword">...</span>
0150     name_chars,10,<span class="keyword">...</span>
0151     timeStamp_chars,<span class="keyword">...</span>
0152     timeSpan_chars,<span class="keyword">...</span>
0153     visibility_chars,10,<span class="keyword">...</span>
0154     snippet_chars,<span class="keyword">...</span>
0155     description_chars,10,<span class="keyword">...</span>
0156     icon_chars, <span class="keyword">...</span>
0157     region_chars,<span class="keyword">...</span>
0158     <span class="string">'&lt;Style&gt;'</span>,10,<span class="keyword">...</span>
0159         icon_chars, <span class="keyword">...</span>
0160     10,<span class="string">'&lt;/Style&gt;'</span>,10,<span class="keyword">...</span>
0161   <span class="string">'&lt;Point '</span>,poly_id_chars,<span class="string">'&gt;'</span>,10,<span class="keyword">...</span>
0162     <span class="string">'&lt;altitudeMode&gt;'</span>,altitudeMode,<span class="string">'&lt;/altitudeMode&gt;'</span>,10,<span class="keyword">...</span>
0163     <span class="string">'&lt;tessellate&gt;'</span>,10,<span class="string">'1'</span>,10,<span class="string">'&lt;/tessellate&gt;'</span>,10,<span class="keyword">...</span>
0164     extrude_chars,10,<span class="keyword">...</span>
0165     <span class="string">'&lt;coordinates&gt;'</span>,10];
0166 
0167 footer = [<span class="string">'&lt;/coordinates&gt;'</span>,10,<span class="keyword">...</span>
0168     10,<span class="string">'&lt;/Point&gt;'</span>,10,<span class="keyword">...</span>
0169     10,<span class="string">'&lt;/Placemark&gt;'</span>,10];  
0170 
0171 <span class="comment">%path plot or not</span>
0172 len = length(coords(:,1,1));
0173 output = <span class="string">''</span>;
0174 <span class="keyword">if</span> length( coords(:,1) ) &gt; 1
0175 
0176     <span class="keyword">for</span> x = 1:len
0177         <span class="keyword">if</span> ~isnan(coords(x,1))
0178             coordinates = <a href="#_sub1" class="code" title="subfunction s = conv_coord(M)">conv_coord</a>(coords(x,:));
0179             output = [ output, header, coordinates, footer ];
0180         <span class="keyword">end</span>
0181     <span class="keyword">end</span>
0182    
0183 <span class="keyword">else</span>
0184     <span class="keyword">if</span> ~isnan(coords)
0185         coordinates = <a href="#_sub1" class="code" title="subfunction s = conv_coord(M)">conv_coord</a>(coords);
0186         output = [ header, coordinates, footer ]; 
0187     <span class="keyword">end</span>
0188 <span class="keyword">end</span>
0189 
0190 
0191 <span class="keyword">if</span> msgToScreen
0192     disp([<span class="string">'Running: '</span>,mfilename,<span class="string">'...Done'</span>])
0193 <span class="keyword">end</span>
0194 
0195 
0196 
0197 
0198 
0199 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0200 <span class="comment">%% LOCAL FUNCTIONS START HERE</span>
0201 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0202 
0203 
0204 <a name="_sub1" href="#_subfunctions" class="code">function s = conv_coord(M)</a>
0205 <span class="comment">%% conv_coord(M)</span>
0206 <span class="comment">% helper function to conver decimal degree coordinates into character array</span>
0207 s=[];
0208 
0209 <span class="keyword">for</span> r=1:size(M,1)
0210     <span class="keyword">for</span> c=1:size(M,2)
0211         s = [s,sprintf(<span class="string">'%.6f'</span>,M(r,c))];
0212         s = <a href="#_sub2" class="code" title="subfunction s_out = trim_trail_zero(s_in)">trim_trail_zero</a>(s);
0213         <span class="keyword">if</span> c==size(M,2)
0214             s=[s,10];
0215         <span class="keyword">else</span>
0216             s=[s,<span class="string">','</span>];          
0217         <span class="keyword">end</span>
0218     <span class="keyword">end</span>
0219 <span class="keyword">end</span>
0220 
0221 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0222 <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
0223 
0224 <a name="_sub2" href="#_subfunctions" class="code">function s_out = trim_trail_zero(s_in)</a>
0225 <span class="comment">%   helper function meant to trim trailing character zeros from a character</span>
0226 <span class="comment">%   array.</span>
0227 
0228 dig = 1;
0229 L = length(s_in);
0230 last_char = s_in(L);
0231 
0232 cont = true;
0233 
0234 <span class="keyword">while</span> (strcmp(last_char,<span class="string">'0'</span>) | strcmp(last_char,<span class="string">'.'</span>)) &amp; cont==1
0235     <span class="keyword">if</span> strcmp((last_char),<span class="string">'.'</span>)
0236         cont = 0;
0237     <span class="keyword">end</span>
0238     s_in = s_in(1:L-dig);
0239     last_char = s_in(length(s_in));
0240     dig = dig+1;
0241 <span class="keyword">end</span>
0242 
0243 s_out = s_in;
0244 
0245 
0246 
0247</pre></div>
<hr><address>Generated on Thu 15-Sep-2016 12:42:46 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>